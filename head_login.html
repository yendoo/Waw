<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <link rel="stylesheet" type="text/css" href="semantic/semantic.css">
    <script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
    <script src="semantic/semantic.js"></script>
</head>

<body style="background-color: #FBFAFA">
    <!--헤더-->
    <div class="ui grid" style="margin-top: 10px; margin-bottom: 10px; background-color: #fff;">
        <div class="five wide column">
            <!-- 로고-->
            <button id="logo" class="ui basic button" style="margin-left: 60px;">
                <i class="icon user"></i>
                로고
            </button>
            <!-- //로고-->
        </div>
        <!--검색-->
        <div class="five wide column">
            <div class="ui fluid action input">
                <input type="text" placeholder="Search...">
                <div class="ui button">검색</div>
            </div>
        </div>
        <!--//검색-->
        <!--메시지 컬럼-->
        <div class="three wide column" style="text-align: right;">
            <div class="ui compact menu" style="margin-right: 25px;">
                <a class="item">
                    <i class="icon mail"></i>
                    <div class="floating ui red label">22</div>
                </a>
                <a class="item">
                    <i class="icon users"></i>
                    <div class="floating ui teal label">22</div>
                </a>
            </div>
        </div>
        <!--//메시지 컬럼-->
        <!-- 로그인컬럼-->
        <div class="three wide column">
            <img id="profile" class="ui medium circular image" src="/images/non-human.png" style="width: 30px; cursor: pointer; margin-top: 6px;">
        </div>
        <!-- //로그인컬럼-->
    </div>
    <!--//헤더-->





    <!-- 사이드 하이드바-->
    <div class="ui left demo vertical inverted sidebar labeled icon menu">
        <a class="item">
            <i class="home icon"></i>
            Home
        </a>
        <a class="item">
            <i class="block layout icon"></i>
            Topics
        </a>
        <a class="item">
            <i class="smile icon"></i>
            Friends
        </a>
    </div>
    <!--// 사이드 하이드바-->

    <!--프로필-->
    <form>
        <div class="ui modal">
            <i class="close icon"></i>
            <div class="header">
                프로필 사진
            </div>
            <div class="image content">
                <div class="ui medium image">
                    <input id="myfile" type="file" onchange="ajaxFileChange();" style="display: none;">
                    <div class="ui massive horizontal divided list">
                        <div class="item">
                            <img class="ui avatar image" src="/images/non-human.png" id="preview" onClick="ajaxFileUpload();" style="width: 120px; height: 120px; margin-left: 40px; margin-bottom: 20px; cursor: pointer;">
                        </div>
                    </div>
                </div>
                <div class="description">
                    <div class="ui header">프로필 이미지를 선택해주세요.</div>
                    <p id="nosay">프로필 이미지를 변경 하실수가 있습니다.</p>
                    <p id="say" style="visibility: hidden;">이 이미지로 하시겠습니까?</p>
                </div>
            </div>
            <div class="actions">
                <button class="ui positive right labeled icon button">
                    바꾸기
                    <i class="checkmark icon"></i>
                </button>

            </div>

        </div>
    </form>
    <!---//프로필-->

    <!--스크립트-->
    <script>
        $('#logo').click(function() {
            $('.ui.left').sidebar('toggle');
            $('.ui.left').sidebar('hide');
        });

        $('#profile').click(function() {
            $('.ui.modal').modal('toggle');

        });


        function ajaxFileUpload() {
            // 업로드 버튼이 클릭되면 파일 찾기 창을 띄운다.
            jQuery("#myfile").click();
        }

        function ajaxFileChange() {
            // 파일이 선택되면 업로드를 진행한다.
            alert('1');
            ajaxFileTransmit();
        }

        function ajaxFileTransmit() {
            var form = jQuery("ajaxFrom")[0];
            var formData = new FormData(form);
            formData.append("message", "파일 확인 창 숨기기");
            formData.append("file", jQuery("#ajaxFile")[0].files[0]);

            jQuery.ajax({
                url: "./ajaxFormReceive.php",
                type: "POST",
                processData: false,
                contentType: false,
                data: formData,
                success: function(json) {
                    var obj = JSON.parse(json);
                }
            });
        }





        //프로필 이미지 띄우기
        var file = document.querySelector("#myfile");

        file.onchange = function() {
            var fileList = file.files;

            //읽기
            var reader = new FileReader();
            reader.readAsDataURL(fileList[0]);

            //로드 한 후 
            reader.onload = function() {
                document.querySelector('#preview').src = reader.result;
            };
        };

    </script>
    <!--//스크립트-->
